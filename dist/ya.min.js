/**
 * @license
 * ya - v0.1.0
 * Copyright (c) 2014, Salvador de la Puente
 * https://github.com/lodr/ya
 *
 * Compiled: 2014-08-18
 *
 * ya is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(a,b){var c,d;"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():(c=a.ya,d=b(),a.ya=d,a.ya.restore=function(){return a.ya=c,d})}(this,function(){"use strict";function a(a,e,f){var g=b(e),h=f.apply(void 0,g);d[c(a)]=h}function b(a){return a.map(function(a){return d[c(a)]})}function c(a){return 0===a.indexOf("./")?a.substring(2):a}var d={};return a("ya",[],function(){function a(a){var c=[].slice.call(arguments,1),d=a.apply(void 0,c);return d[h]=!0,d[i]=void 0,d[g]=m++,l.push(d),1===l.length&&setTimeout(b),d[g]}function b(){if(f=!1,0!==l.length){var a,d,e,g="unshift",k=l.pop();if(k[h]){if(a=c(k),f)return;d=a.done,e=a.value,d?g=null:e&&"function"==typeof e.then&&(k[h]=!1,e.then(function(a){k[h]=!0,k[i]=a}),e[j]&&(g="push"))}g&&l[g](k),setTimeout(b)}}function c(b){var c,d,e;try{c=b[i],b[i]=void 0,d=b.next(c)}catch(f){"function"==typeof a.onerror&&(e={taskId:b[g],error:f},a.onerror(e)),d={done:!0}}return d}function d(a){a=a||0;var b=[],c=[];return{get:function(){var d;if(b.length>0){var e,f,g=b.shift();e=g.resolver,f=g.value,e&&e(),a>0&&b.length>=a&&(e=b[a-1].resolver,b[a-1].resolver=null,e&&e()),d=Promise.resolve(f),d[j]=!0}else d=new Promise(function(a){c.push({resolver:a})});return d},send:function(d){var e;if(c.length>0){var f=c.shift().resolver;f(d),e=Promise.resolve(),e[k]=!0}else{var g=b.length>=a;g?e=new Promise(function(a){b.push({resolver:a,value:d})}):(e=Promise.resolve(),b.push({resolver:null,value:d}),e[j]=!0)}return e}}}function e(){l=[],f=!0}var f,g=Symbol(),h=Symbol(),i=Symbol(),j=Symbol(),k=Symbol(),l=[],m=1;return a.channel=d,a.clear=e,a}),d.ya});